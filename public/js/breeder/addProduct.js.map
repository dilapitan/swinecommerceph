{"version":3,"sources":["addProduct.js","formValidationMethods.js","manageProducts_validation.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addProduct.js","sourcesContent":["'use strict';\n\nvar product = {\n  add : function(parent_form){\n\n    var data_values = {\n        \"name\": parent_form.find('input[name=name]').val(),\n        \"type\": parent_form.find('#select-type').val(),\n        \"farm_from_id\": parent_form.find('#select-farm').val(),\n        \"birthdate\": parent_form.find('input[name=birthdate]').val(),\n        \"price\": parent_form.find('input[name=price]').val(),\n        \"adg\": parent_form.find('input[name=adg]').val(),\n        \"fcr\": parent_form.find('input[name=fcr]').val(),\n        \"backfat_thickness\": parent_form.find('input[name=backfat_thickness]').val(),\n        \"_token\" : parent_form.find('input[name=_token]').val(),\n    };\n\n    data_values.price = data_values.price.replace(\",\", \"\"); // remove comma in price before storing\n\n    // Transform breed syntax if crossbreed\n    if($(\"#create-product input:checked\").val() === 'crossbreed'){\n        var fbreed = parent_form.find('input[name=fbreed]').val();\n        var mbreed = parent_form.find('input[name=mbreed]').val();\n\n        data_values[\"breed\"] = fbreed.toLowerCase().trim()+'+'+mbreed.toLowerCase().trim();\n    }\n    else data_values[\"breed\"] = parent_form.find('input[name=breed]').val().toLowerCase().trim();\n\n    data_values[\"other_details\"] = '';\n\n    // Do AJAX\n    $.ajax({\n        url: parent_form.attr('action'),\n        type: \"POST\",\n        cache: false,\n        data: data_values,\n        success: function(data){\n      \n            Materialize.toast('Product added!', 2500, 'green lighten-1');\n            location.href = location.origin + '/breeder/products'; // redirect to Show Products page\n        },\n        error: function(message){\n            console.log(message['responseText']);\n            $('#overlay-preloader-circular').remove();\n        }\n    });\n  },\n\n\n  manage_necessary_fields: function(parent_form, type){\n\n      if(type === 'semen'){\n          if(product.before_select_value === 'sow' || product.before_select_value === 'gilt'){\n              parent_form.find('.other-details-container').html('');\n              $(product.other_details_default).prependTo(parent_form.find(\".other-details-container\")).fadeIn(300);\n          }\n          product.before_select_value = 'semen';\n      }\n      // Provide default values in other_details category for sow\n      else if(type === 'sow' || type === 'gilt'){\n          parent_form.find('.other-details-container').html('');\n          $('<div class=\"detail-container\">'+\n                  '<div class=\"input-field col s6\">'+\n                      '<input class=\"validate valid\" name=\"characteristic[]\" type=\"text\" value=\"Litter Size\">'+\n                      '<label for=\"characteristic[]\" class=\"active\">Characteristic</label>'+\n                  '</div>'+\n                  '<div class=\"input-field col s5\">'+\n                      '<input class=\"validate\" name=\"value[]\" type=\"text\" value=\"\">'+\n                      '<label for=\"value[]\" class=\"active\">Value</label>'+\n                  '</div>'+\n                  '<div class=\"input-field col s1 remove-button-container\">'+\n                      '<a href=\"#\" class=\"tooltipped remove-detail\" data-position=\"top\" data-delay=\"50\" data-tooltip=\"Remove detail\">'+\n                          '<i class=\"material-icons grey-text text-lighten-1\">remove_circle</i>'+\n                      '</a>'+\n                  '</div>'+\n              '</div>'+\n          '<div class=\"detail-container\">'+\n                  '<div class=\"input-field col s6\">'+\n                      '<input class=\"validate valid\" name=\"characteristic[]\" type=\"text\" value=\"Number of teats\">'+\n                      '<label for=\"characteristic[]\" class=\"active\">Characteristic</label>'+\n                  '</div>'+\n                  '<div class=\"input-field col s5\">'+\n                      '<input class=\"validate\" name=\"value[]\" type=\"text\" value=\"\">'+\n                      '<label for=\"value[]\" class=\"active\">Value</label>'+\n                  '</div>'+\n                  '<div class=\"input-field col s1 remove-button-container\">'+\n      '                <a href=\"#\" class=\"tooltipped remove-detail\" data-position=\"top\" data-delay=\"50\" data-tooltip=\"Remove detail\">'+\n                          '<i class=\"material-icons grey-text text-lighten-1\">remove_circle</i>'+\n                      '</a>'+\n                  '</div>'+\n              '</div>').hide().prependTo(parent_form.find(\".other-details-container\")).fadeIn(300);\n\n          parent_form.find('.remove-detail').tooltip({delay:50});\n          product.before_select_value = type;\n      }\n\n      // Boar\n      else{\n          if(product.before_select_value === 'sow' || product.before_select_value === 'gilt'){\n              parent_form.find('.other-details-container').html('');\n              $(product.other_details_default).prependTo(parent_form.find(\".other-details-container\")).fadeIn(300);\n          }\n          product.before_select_value = 'boar';\n      }\n  }\n}\n\n$(document).ready(function () {\n\n  // Hide certain elements\n  $('.input-crossbreed-container').hide();\n\n  // initialization of Materialize's Date Picker\n  $('.datepicker').pickadate({\n      max: true,\n      selectMonths: true,\n      selectYears: 4,\n      format: 'mmmm d, yyyy'\n  });\n\n  /* ----------- Form functionalities ----------- */\n    // Breed radio\n    $(\"input.purebreed\").on('click', function(){\n      $(this).parents('form').find('.input-crossbreed-container').hide();\n      $(this).parents('form').find('.input-purebreed-container').fadeIn(300);\n  });\n  $(\"input.crossbreed\").on('click', function(){\n      $(this).parents('form').find('.input-purebreed-container').hide();\n      $(this).parents('form').find('.input-crossbreed-container').fadeIn(300);\n  });\n\n  // Manage necessary fields depending on product type\n  $(\"#select-type\").on('change', function(){\n      product.manage_necessary_fields($(this).parents('form'), $(this).val());\n  });\n  $(\"#edit-select-type\").on('change', function(){\n      product.manage_necessary_fields($(this).parents('form'), $(this).val());\n  });\n});","'use strict';\n\n// Place error on specific HTML input\nvar placeError = function(inputElement, errorMsg){\n    // Parse id of element if it contains '-' for the special\n    // case of finding the input's respective\n    // label on editProfile pages\n    var inputId = (inputElement.id.includes('-') && /\\d/.test(inputElement.id))\n        ? (inputElement.id.split('-')[2])\n        : inputElement.id;\n\n    $(inputElement)\n        .parents(\"form\")\n        .find(\"label[for='\" + inputId + \"']\")\n        .attr('data-error', errorMsg);\n\n    setTimeout(function(){\n        if(inputElement.id.includes('select')){\n            // For select input, find first its respective input text\n            // then add the 'invalid' class\n            $(inputElement)\n                .parents('.select-wrapper')\n                .find('input.select-dropdown')\n                .addClass('invalid');\n        }\n        else $(inputElement).addClass('invalid');\n    },0);\n};\n\n// Place success from specific HTML input\nvar placeSuccess = function(inputElement){\n\n    // For select input, find first its respective input text\n    // then add the needed classes\n    var inputTextFromSelect = (inputElement.id.includes('select')) ? $(inputElement).parents('.select-wrapper').find('input.select-dropdown') : '';\n\n    // Check first if it is invalid\n    if($(inputElement).hasClass('invalid') || $(inputTextFromSelect).hasClass('invalid')){\n        $(inputElement)\n            .parents(\"form\")\n            .find(\"label[for='\" + inputElement.id + \"']\")\n            .attr('data-error', false);\n\n        setTimeout(function(){\n            if(inputElement.id.includes('select')) inputTextFromSelect.removeClass('invalid').addClass('valid');\n            else $(inputElement).removeClass('invalid').addClass('valid');\n        },0);\n    }\n    else {\n        if(inputElement.id.includes('select')) inputTextFromSelect.addClass('valid');\n        else $(inputElement).addClass('valid');\n    }\n}\n\nvar validationMethods = {\n    // functions must return either true or the errorMsg only\n    required: function(inputElement){\n        var errorMsg = 'This field is required';\n        return inputElement.value ? true : errorMsg;\n    },\n    requiredIfRadio: function(inputElement, radioId){\n        var errorMsg = 'This field is required';\n        var radioInputElement = document.getElementById(radioId);\n        if(radioInputElement.checked) return inputElement.value ? true : errorMsg;\n        else return true;\n    },\n    requiredDropdown: function(inputElement){\n        var errorMsg = 'This field is required';\n        return inputElement.value ? true : errorMsg;\n    },\n    email: function(inputElement){\n        var errorMsg = 'Please enter a valid email address';\n        return /\\S+@\\S+\\.\\S+/.test(inputElement.value) ? true : errorMsg;\n    },\n    minLength: function(inputElement, min){\n        var errorMsg = 'Please enter ' + min + ' or more characters';\n        return (inputElement.value.length >= min) ? true : errorMsg;\n    },\n    equalTo: function(inputElement, compareInputElementId){\n        var errorMsg = 'Please enter the same value';\n        var compareInputElement = document.getElementById(compareInputElementId);\n        return (inputElement.value === compareInputElement.value) ? true : errorMsg;\n    },\n    zipCodePh: function(inputElement){\n        var errorMsg = 'Please enter zipcode of 4 number characters';\n        return (/\\d{4}/.test(inputElement.value) && inputElement.value.length === 4) ? true : errorMsg;\n    },\n    phoneNumber: function(inputElement){\n        var errorMsg = 'Please enter 11-digit phone number starting with 09';\n        return (/^09\\d{9}/.test(inputElement.value) && inputElement.value.length === 11)  ? true : errorMsg;\n    }\n\n};\n","'use strict';\n\nvar validateFunction = function(){\n\n    return function(){\n        var validateInput = function(inputElement, modal){\n\n            // Initialize needed validations\n            var validations = {\n                name: ['required'],\n                breed: ['requiredIfRadio:purebreed'],\n                fbreed: ['requiredIfRadio:crossbreed'],\n                mbreed: ['requiredIfRadio:crossbreed'],\n                'select-type': ['requiredDropdown'],\n                'select-farm': ['requiredDropdown'],\n                'edit-name': ['required'],\n                'edit-breed': ['requiredIfRadio:edit-purebreed'],\n                'edit-fbreed': ['requiredIfRadio:edit-crossbreed'],\n                'edit-mbreed': ['requiredIfRadio:edit-crossbreed'],\n                'edit-select-type': ['requiredDropdown'],\n                'edit-select-farm': ['requiredDropdown'],\n            };\n\n            // Check if validation rules exist\n            if(validations[inputElement.id]){\n                var result = true;\n\n                for (var i = 0; i < validations[inputElement.id].length; i++) {\n                    var element = validations[inputElement.id][i];\n\n                    // Split arguments if there are any\n                    var method = element.includes(':') ? element.split(':') : element;\n\n                    result = (typeof(method) === 'object')\n                        ? (validationMethods[method[0]](inputElement, method[1]))\n                        : (validationMethods[method](inputElement));\n\n                    // Result would return to a string errorMsg if validation fails\n                    if(result !== true){\n                        placeError(inputElement, result);\n                        return false;\n                    }\n                }\n\n                // If all validations succeed then\n                if(result === true){\n                    placeSuccess(inputElement);\n                    return true;\n                }\n            }\n        };\n\n        // focusout events on add-product-modal\n        $('body').on('focusout', '#add-product-modal input', function(e){\n            validateInput(this, 'add-product-modal');\n        });\n\n        // keyup events on add-product-modal\n        $('body').on('keyup', '#add-product-modal input', function(e){\n            if($(this).hasClass('invalid') || $(this).hasClass('valid')) validateInput(this, 'add-product-modal');\n        });\n\n        // focusout and keyup events on add-product-modal\n        $('body').on('focusout keyup', '#edit-product-modal input', function(e){\n            validateInput(this, 'edit-product-modal');\n        });\n\n        // select change events\n        $('select').change(function(){\n            validateInput(this);\n        });\n\n        // Remove respective 'invalid' class and input text value\n        // of current radio when radio value changes\n        $(\"#create-product input[name='radio-breed']\").change(function(){\n            if($(\"#create-product input:checked\").val() === 'crossbreed'){\n                $('input#breed').val('');\n                $('input#breed').removeClass('valid invalid');\n            }\n            else{\n                $('input#fbreed, input#mbreed').val('');\n                $('input#fbreed, input#mbreed').removeClass('valid invalid');\n            }\n        });\n\n        // Temporary fix for prompting 'valid' class after\n        // value change on datepicker\n        $('#birthdate, #edit-birthdate').change(function(e){\n            e.stopPropagation();\n            $(this).removeClass('invalid').addClass('valid');\n        });\n\n        // Submit add product\n        $(\"#create-product\").submit(function(e){\n            e.preventDefault();\n\n            var validName = validateInput(document.getElementById('name'));\n            var validType = validateInput(document.getElementById('select-type'));\n            var validFarmFrom = validateInput(document.getElementById('select-farm'));\n            var validBreed = true;\n\n            // Validate appropriate breed input/s according to chosen radio breed value\n            if($('#create-product input:checked').val() === 'crossbreed'){\n                var validFbreed = validateInput(document.getElementById('fbreed'));\n                var validMbreed = validateInput(document.getElementById('mbreed'));\n                validBreed = validBreed &&  validFbreed &&  validMbreed;\n            }\n            else validBreed = validateInput(document.getElementById('breed'));\n\n            if(validName && validType && validFarmFrom && validBreed){\n                // Disable submit/add product button\n                $('#submit-button').addClass('disabled');\n                $('#submit-button').html('Adding Product ...');\n\n                product.add($('#create-product'));\n            }\n            else Materialize.toast('Please properly fill all required fields.', 2500, 'orange accent-2');\n\n        });\n\n        // Update details of a product\n        $('.update-button').click(function(e){\n            e.preventDefault();\n\n            var validName = validateInput(document.getElementById('edit-name'));\n            var validType = validateInput(document.getElementById('edit-select-type'));\n            var validFarmFrom = validateInput(document.getElementById('edit-select-farm'));\n            var validBreed = true;\n\n            // Validate appropriate breed input/s according to chosen radio breed value\n            if($('#edit-product input:checked').val() === 'crossbreed'){\n                var validFbreed = validateInput(document.getElementById('edit-fbreed'));\n                var validMbreed = validateInput(document.getElementById('edit-mbreed'));\n                validBreed = validBreed &&  validFbreed &&  validMbreed;\n            }\n            else validBreed = validateInput(document.getElementById('edit-breed'));\n\n            if(validName && validType && validFarmFrom && validBreed){\n                // Disable update-button\n                $(this).addClass('disabled');\n                $(this).html('Updating...');\n\n                product.edit($('#edit-product'), $(this));\n            }\n            else Materialize.toast('Please properly fill all required fields.', 2500, 'orange accent-2');\n\n        });\n    }\n}\n\n$(document).ready(validateFunction());\n"]}